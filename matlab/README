
--------------------------------------------------------------------------------
- Unix including MacOS X
--------------------------------------------------------------------------------

./configure --with-matlab

make
cd matlab
make

--------------------------------------------------------------------------------
- Windows with MinGW
--------------------------------------------------------------------------------

./configure --enable-mini-gsl --enable-pthread=no --with-matlab

cd matlab

export MATLAB_DIR=/path/to/matlab

gcc -DHAVE_CONFIG_H -DMATLAB_MEX_FILE -DNDEBUG -I. -I.. -I../include -I${MATLAB_DIR}/extern/include -I${MATLAB_DIR}/simulink/include -O3 -fno-exceptions -ffast-math -Wall -Wwrite-strings -Winline -Wno-trigraphs -fPIC -c -o interface.o interface.c

gcc -DHAVE_CONFIG_H -DMATLAB_MEX_FILE -DNDEBUG -I. -I.. -I../include -I${MATLAB_DIR}/extern/include -I${MATLAB_DIR}/simulink/include -O3 -fno-exceptions -ffast-math -Wall -Wwrite-strings -Winline -Wno-trigraphs -fPIC -c -o binningPosterior.o binningPosterior.c
gcc -shared -o binningPosterior.mexw32 interface.o binningPosterior.o -Wl,--rpath-link,${MATLAB_DIR}/bin/win32 -L${MATLAB_DIR}/bin/win32 -Wl,-version-script,${MATLAB_DIR}/extern/lib/win32/mexFunction.map -Wl,--no-undefined -static-libgcc -lm -lmx -lmex -lmat ../src/.libs/libbinningPosterior.a

gcc -DHAVE_CONFIG_H -DMATLAB_MEX_FILE -DNDEBUG -I. -I.. -I../include -I${MATLAB_DIR}/extern/include -I${MATLAB_DIR}/simulink/include -O3 -fno-exceptions -ffast-math -Wall -Wwrite-strings -Winline -Wno-trigraphs -fPIC -c -o samplingUtility.o samplingUtility.c
gcc -shared -o samplingUtility.mexw32 interface.o samplingUtility.o -Wl,--rpath-link,${MATLAB_DIR}/bin/win32 -L${MATLAB_DIR}/bin/win32 -Wl,-version-script,${MATLAB_DIR}/extern/lib/win32/mexFunction.map -Wl,--no-undefined -static-libgcc -lm -lmx -lmex -lmat ../src/.libs/libsamplingUtility.a

gcc -DHAVE_CONFIG_H -DMATLAB_MEX_FILE -DNDEBUG -I. -I.. -I../include -I${MATLAB_DIR}/extern/include -I${MATLAB_DIR}/simulink/include -O3 -fno-exceptions -ffast-math -Wall -Wwrite-strings -Winline -Wno-trigraphs -fPIC -c -o prombs.o prombs.c
gcc -shared -o prombs.mexw32 interface.o prombs.o -Wl,--rpath-link,${MATLAB_DIR}/bin/win32 -L${MATLAB_DIR}/bin/win32 -Wl,-version-script,${MATLAB_DIR}/extern/lib/win32/mexFunction.map -Wl,--no-undefined -static-libgcc -lm -lmx -lmex -lmat ../libprombs/.libs/libprombs.a

gcc -DHAVE_CONFIG_H -DMATLAB_MEX_FILE -DNDEBUG -I. -I.. -I../include -I${MATLAB_DIR}/extern/include -I${MATLAB_DIR}/simulink/include -O3 -fno-exceptions -ffast-math -Wall -Wwrite-strings -Winline -Wno-trigraphs -fPIC -c -o prombsExtended.o prombsExtended.c
gcc -shared -o prombsExtended.mexw32 interface.o prombsExtended.o -Wl,--rpath-link,${MATLAB_DIR}/bin/win32 -L${MATLAB_DIR}/bin/win32 -Wl,-version-script,${MATLAB_DIR}/extern/lib/win32/mexFunction.map -Wl,--no-undefined -static-libgcc -lm -lmx -lmex -lmat ../libprombs/.libs/libprombs.a

In case mexFunction.map does not exist:

cat <<EOF >mexFunction.map
MEX {
        global:
                mexFunction;
                mexVersion;
        local:
                *;
};
EOF
